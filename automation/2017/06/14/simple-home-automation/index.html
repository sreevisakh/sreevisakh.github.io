
<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html" />

  <meta name="keywords" content="an-else-view,sreevisakh,javascript,ubuntu,git,node,js,raspberry, pi, automation" />
  <meta name="msvalidate.01" content="DD43C10FCD76ECD1121F8BC9AC1CA438" />
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1" />
  <meta property="og:title" content="Simple Home Automation" />
  <meta name="description" content="" />
  <meta property="og:description" content="" />
  <link rel="canonical" href="https://sreevisakh.github.io/automation/2017/06/14/simple-home-automation/" />
  <meta property="og:url" content="https://sreevisakh.github.io/automation/2017/06/14/simple-home-automation/" />
  <meta property="og:site_name" content="an-else-view" />
  <meta property="og:type" content="article" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@_sreevisakh" />
  <meta name="twitter:creator" content="@_sreevisakh" />
  <meta property="fb:app_id" content="1538630872879036" />
  <meta name="google-site-verification" content="mizsVxe9d4dqvMN1c6kT5C8x1F6Aw4srhKvg9r195N0" />
  <link rel="apple-touch-icon" href="/public/favicon.ico" />
  <link rel="shortcut icon" href="/public/favicon.ico" />
  <link rel="favicon" href="/public/favicon.ico" />
  <link rel="canonical" href="https://sreevisakh.github.io" />

  <title>
    Simple Home Automation | an-else-view | Sreevisakh 

  </title>
  <!-- CSS -->
  <link rel="stylesheet" href="https://sreevisakh.github.io/public/css/style.css" />
  <link rel="stylesheet" href="https://sreevisakh.github.io/public/css/syntax.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" />

  <!-- Icons -->

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml" />
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-34015218-2', 'auto');
    ga('send', 'pageview');
  </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6061935954047022",
      enable_page_level_ads: true
    });
  </script>
  <script type="application/ld+json">
  {
    "@context": "http://schema.org/",
    "@type": "Article",
    "name": "Simple Home Automation",
    "author": {
        "@type" : "Person",
        "name": "Sreevisakh",
        "email": "mail@sreevisakh.com"
    },
    "datePublished" :"2017-06-14 00:31:41 +0530",
    "headline":"Simple Home Automation",
    "publisher":{
        "@type":"Organization",
        "name":"an-else-view",
        "logo":{
            "@type":"ImageObject",
            "url":"https://sreevisakh.github.io/public/logo.png",
            "width":"256",
            "height":"256"
        }
    },
    "image":{
        "@type":"ImageObject",
        "url": "https://pbs.twimg.com/media/DChnJMtUIAAhTSs.jpg" ,
    },
    "dateModified":"2019-07-11 19:51:28 +0530",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https://sreevisakh.github.io"
      }
  }
  </script>
  
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://sreevisakh.github.ioautomation",
          "name": ""
        }
      }]
    }
    </script>
  
</head>


<body>

  <div class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <h1>
        <a href="">
          an-else-view
        </a>
      </h1>
            <p class="lead">A Web developers usual blog</p>
        </div>
        <nav class="sidebar-nav">
            <a class="sidebar-nav-item" href="/">Home</a>         
            <a class="sidebar-nav-item" href="/about/">About</a>       
            <a class="sidebar-nav-item" href="/categories/">Categories</a>         
            <a class="sidebar-nav-item" href="/posts/">Posts</a>     
            <a class="sidebar-nav-item" href="/resume/">Resume</a>                                                               
            <a class="sidebar-nav-item" href="https://github.com/sreevisakh/">GitHub project</a>
        </nav>
    </div>
</div>


  <div class="content container">
    <div class="post">
  <h1 class="post-title">Simple Home Automation</h1>
  <span class="post-date">14 Jun 2017</span>
  <p><img src="https://pbs.twimg.com/media/DChnJMtUIAAhTSs.jpg" alt="Simple Home Automaion | an-else-view"></p>

<p>This is a DIY project to automate a light &amp; fan using raspberry pi.</p>

<h2>Things Required</h2>

<ol>
<li><p><a href="https://www.amazon.in/gp/product/B01CD5VC92/ref=as_li_tl?ie=UTF8&camp=3638&creative=24630&creativeASIN=B01CD5VC92&linkCode=as2&tag=sreevisakh-21&linkId=f7c76ef2d3b97c9ed6f68c51c6271f24">Raspberry Pi Any Model will be fine (3B preferd for Wifi Access)</a></p></li>
<li><p><a href="https://www.amazon.in/gp/product/B01C2IG1GY/ref=as_li_tl?ie=UTF8&camp=3638&creative=24630&creativeASIN=B01C2IG1GY&linkCode=as2&tag=sreevisakh-21&linkId=b96f8d4dc2f4d129047bb7b3d998ca6f%22">220v - 5v Relay</a></p></li>
<li><p><a href="https://www.amazon.in/gp/product/B01H5C3IIG/ref=as_li_tl?ie=UTF8&camp=3638&creative=24630&creativeASIN=B01H5C3IIG&linkCode=as2&tag=sreevisakh-21&linkId=2e6475f0fd9c3b4cc79d524abbc2f522">Jumper Cables</a></p></li>
</ol>

<h3>Optional</h3>

<ol>
<li><p><a href="https://www.amazon.in/gp/product/B01BOOU7SU/ref=as_li_tl?ie=UTF8&camp=3638&creative=24630&creativeASIN=B01BOOU7SU&linkCode=as2&tag=sreevisakh-21&linkId=4e79df25ffac052b991a874b0a261790">Power Supply For Pi</a></p></li>
<li><p><a href="https://www.amazon.in/gp/product/B01D4WM9JA/ref=as_li_tl?ie=UTF8&camp=3638&creative=24630&creativeASIN=B01D4WM9JA&linkCode=as2&tag=sreevisakh-21&linkId=fee89d7bc86ac31d02891448b8aeeb73">Pi Case</a></p></li>
</ol>

<h2>Some Basics</h2>

<p>Any Electrical Device that work with AC will have two wires connected to it. One of them is called live &amp; the other in neutral. To control the current flow to a device, a switch is connected in middle of the live so when the switch is off, Circuit is open and current won&#39;t flow through the device. We are going to do the same with the relay.  </p>

<h2>Relay</h2>

<p>Relay will help in controlling 220v Live wire with help of 5v. Basically Our Pi works with 5v so it can manage 220v line with the help of a Relay.</p>

<p>Relay have two sides. One Side we will connect the Live wire. and the other Side we will connect the Pi.</p>

<h2>Raspberry Pi</h2>

<p>Assuming you know the basics of pi and ready to be used.  it have pins on the side of it.  Each pin have a number to identify them and each of them have a purpose. The &quot;pi side&quot; of relay has to be powered from the Pi. for this purpose they provide two pins VCC &amp; GND in the relay, in Pi&#39;s pin diagram you can see these pins. Connect them to the Pi,  Now to control the relay we need an input wire. Connect any of the GPIO pin to the third pin. Refer the <a href="https://www.raspberrypi.org/documentation/usage/gpio-plus-and-raspi2/">pin diagram</a> of your pi for this. Now we can control the Relay from PI</p>

<ul>
<li><a href="https://pinout.xyz/pinout">Interactive pin diagram</a></li>
</ul>

<p>These GPIO ports can be controlled by program running in the Pi. So we can send either HIGH or LOW into the INPUT pin of relay through these programs.</p>

<p>Now Identify the live wire in the connection to your device. and connect them to other side of relay. Be very careful Its 220v, it can kill you !!!</p>

<h2>Programming Pi</h2>

<p>Pi can be controlled by running programs inside it.  Default they have libraries to do this.
following is a simple versin using python. SSH into you pi and add the code to a file and execute.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="ch">#!/usr/bin/python</span>

<span class="c1">#import GPIO library</span>
<span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="kn">as</span> <span class="nn">GPIO</span>

<span class="c1"># set GPIO mode to BCM</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>

<span class="c1"># here 23 is  GPIO23 port in the PI where I connected the input wire from relay</span>
<span class="c1"># change it which ever port you used</span>
<span class="c1"># since we are gonna send data to relay set it to output mode</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>

<span class="c1"># GPIO port work in Binary mode. so set either 1 or 0 to control it.</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>Remeber we have connected the VCC, GND, and another line to GPIO.  So the above code will control the GPIO port.</p>

<p>When you write a 1/GPIO.HIGH to the port. GPIO will enable the port and Relay will allow current to flow &amp; your device will Turn on and If you write a 0 it will turn off the relay opening the circuit and your device will turn off.</p>

<h2>Controlling android</h2>

<p>You can expose the above functions with a server &amp; apis. Which you can call from yu android device.  Task Automation Apps will help you send HTTP Rest calls to the PI to control them.
more on that later.</p>

<h2>Controlling with Iphone</h2>

<p>Apple have <a href="https://developer.apple.com/support/homekit-accessory-protocol/">homekit</a> which can be used to controlling home accessories.  Apple devices will detect these devices automatically. To make our device a homekit supported device,  We have to run a program inside pi and configure it accordingly. HAP is used by apple for this communication. You can see sample code <a href="https://github.com/sreevisakh/HAP-NodeJS">here</a>.</p>

<p>After Cloning the repo and running Core.js your Iphone will detect your devices and then you can control them with siri or through Control Center.</p>

<p>Try Saying Turn the light off or better Setup scenes inside and say &quot;I&#39;m Home&quot;</p>

<h3>Control Home With Siri</h3>

<p><img src="https://scontent.fblr1-1.fna.fbcdn.net/v/t1.0-9/19274998_1538760829532707_2252397298579481457_n.jpg?oh=de953e83ac6c86858c6ffc572dab00b7&oe=59E3B97D" alt="Control Home With Siri"></p>

<h3>Configure accessories in your Apple Devices</h3>

<p><img src="https://scontent.fblr1-1.fna.fbcdn.net/v/t1.0-9/19146195_1538760846199372_1250337236337799610_n.jpg?oh=dcc34a0344157cee3d1d063119c45db5&oe=59DBEB5D" alt="Add accesoories to your Iphone"></p>

<h3>Add scenes and control accessories together</h3>

<p><img src="https://scontent.fblr1-1.fna.fbcdn.net/v/t1.0-9/19113679_1538760842866039_8437549205794769270_n.jpg?oh=dc32274cabed3af0fcb955fcdba53154&oe=59D4AA55" alt="Add scenes and control accessories together"></p>

<h2>Detetcing your presence in home.</h2>

<p>TBD</p>

<h2>Learning when you will reach home</h2>

<p>TBD</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/android/2019/07/06/adding-custom-build-to-android-project/">
            Adding Custom Build to Android Project
            <small>06 Jul 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/javascript/2017/05/09/recommended-way-of-adding-multiple-classes-in-css-modules/">
            Recommended Way of adding multiple classes in css modules
            <small>09 May 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/webpack/2017/05/06/deploying-webpack-app-on-heroku/">
            Install webpack app on heroku
            <small>06 May 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>



  </div>

</body>

</html>
